#include <SPI.h>
#include "nRF24L01.h"
#include "RF24.h"
 
#define CE_PIN 3
#define CSN_PIN 2


unsigned int joystick[3]={0,};


const uint64_t pipe = 0xE8E8F0F0E1LL;


//입출력핀 선언
unsigned char inputPin[5] = {A2, A3, A4, A5, 8};

RF24 radio(CE_PIN, CSN_PIN);


void setup(void)
{
  Serial.begin(9600);   //통신속도
  radio.begin();        //통신시작
  radio.setPALevel(RF24_PA_MIN); // LOW, MAX
  radio.openWritingPipe(pipe);
   //핀모드 입출력 설정
  for(char i = 0; i < 5; i++){
   pinMode(inputPin[i], INPUT); 
  }
  
 // for(int i = 0; i < 1; i++){
//   pinMode(outputPin[i], OUTPUT); 
 // }  
}


void loop(void)
{
 // radio.stopListening();
  //데이터저장

  
  //RED Button
  if(digitalRead(8) == LOW)
    joystick[2] = 0;
  else
    joystick[2] = 1;
    
  //x축 데이터 저장
  joystick[0] = analogRead(A0);

  //y축 데이터 저장
  joystick[1] = analogRead(A1);

  
  //시작 주소와 데이터 사이즈 전달
  for(int i= 0; i<3;i++){
    Serial.print("data");
    Serial.print(i);
    Serial.print(" : ");
    Serial.println(joystick[i]);
  }
  Serial.println("Send");  
  joystick[3]++;
  radio.write( joystick, sizeof(joystick) );
 // Serial.println("complete");
 //delay(1000);
}
